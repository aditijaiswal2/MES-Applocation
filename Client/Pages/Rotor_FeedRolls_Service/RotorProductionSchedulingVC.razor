@page "/rps"
@using MES.Client.Dialog
@using MES.Client.Dialog.RotorProduction
@using MES.Client.Utitlity
@using MES.Shared.Models
@using MES.Shared.Models.Rotors
@using ReactorBlazorQRCodeScanner
@using System.Text
@using static MES.Client.Pages.LoginVC


@inject Blazored.LocalStorage.ILocalStorageService localStorage
@inject HttpClient HttpClient
@inject ISnackbar Snackbar
@inject IDialogCompletionService CompletionService
@inject IHttpClientFactory _httpClient
@inject IJSRuntime JS;
@inject Blazored.LocalStorage.ILocalStorageService localStorage
@inject NavigationManager NavigationManager

<MudContainer Class="mt-5">
    <MudGrid>
        <MudItem xs="12">
            <!-- Rotor Section -->
            <MudPaper Class="pa-4 mb-2">
                <MudText Typo="Typo.h6" Class="cursor-pointer" @onclick="ToggleRotor">
                    ▶ Rotors (@(rotorList?.Count(r => !string.Equals(r.RotorCategorization, "Deleted Scrap", StringComparison.OrdinalIgnoreCase)) ?? 0))
                </MudText>

                @if (ShowRotorFilters)
                {
                        <MudList Dense="true">
                            <MudList>
                                <MudListItem Class="cursor-pointer" @onclick="ToggleSimplerotors">▶ Simple</MudListItem>
                            </MudList>

                        @if (ShowSimpleRotorFilters)
                        {
                                    <MudGrid Spacing="3">
                                        <!-- Left Panel: Search & List -->
                                        <MudItem xs="12" md="4">
                                            <MudPaper Elevation="3" Class="pa-3">
                                                <MudTextField @bind-Value="searchTerm" Placeholder="Search..." Adornment="Adornment.Start" AdornmentIcon="@Icons.Material.Filled.Search" FullWidth="true" />
                                                <MudList Dense="true">
                                            @foreach (var item in simpleRotorList.Where(i => i.SerialNumber.Contains(searchTerm, StringComparison.OrdinalIgnoreCase)))
                                            {
                                                            <MudListItem Button="true" OnClick="() => SelectsimpleInspection(item)" Class="@(hoveredInspection == item ? "hover-highlight" : null)"
                                                            @onmouseover="() => hoveredInspection = item"
                                                            @onmouseout="() => hoveredInspection = null">
                                                                <MudText>@item.SerialNumber - @item.Customer - @item.RotorsNumber</MudText>
                                                            </MudListItem>
                                            }
                                                </MudList>
                                            </MudPaper>
                                        </MudItem>

                                @if (selectedInspection != null)
                                {
                                                <MudItem xs="12" md="8">
                                                    <MudPaper Elevation="3" Class="pa-3" Style="overflow: visible;">
                                            @if (selectedInspection != null)
                                            {
                                                                <MudGrid>

                                                                        <MudItem xs="4">
                                                                            <MudTextField Label="Customer" @bind-Value="selectedInspection.Customer" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                                        </MudItem>
                                                                        <MudItem xs="4">
                                                                            <MudTextField Label="Location" @bind-Value="selectedInspection.Location" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                                        </MudItem>
                                                                        <MudItem xs="4">
                                                                            <MudTextField Label="Inspected Date" @bind-Value="selectedInspection.Received" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                                        </MudItem>
                                                                        <MudItem xs="4">
                                                                            <MudTextField Label="Inspected by" @bind-Value="selectedInspection.Inspected" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                                        </MudItem>

                                                                        <MudItem xs="4">
                                                                            <MudTextField Label="Rotors Serial Number" @bind-Value="selectedInspection.RotorsNumber" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                                        </MudItem>


                                                                        <MudItem xs="4">
                                                                            <MudTextField Label="Make" @bind-Value="selectedInspection.Make" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                                        </MudItem>

                                                                        <MudItem xs="4">
                                                                            <MudTextField Label="Dia" @bind-Value="selectedInspection.Dia" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                                        </MudItem>

                                                                        <MudItem xs="4">
                                                                            <MudTextField Label="Len" @bind-Value="selectedInspection.Len" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                                        </MudItem>

                                                                        <MudItem xs="4">
                                                                            <MudTextField Label="Flts" @bind-Value="selectedInspection.Fits" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                                        </MudItem>

                                                                        <MudItem xs="4">
                                                                            <MudTextField Label="Material" @bind-Value="selectedInspection.Materials" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                                        </MudItem>

                                                                        <MudItem xs="4">
                                                                            <MudTextField Label="Other" @bind-Value="selectedInspection.Others" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                                        </MudItem>

                                                                        <MudItem xs="4">

                                                                            <MudTextField Label="Incoming Rotor Dia." @bind-Value="selectedInspection.RotorsDia" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                                        </MudItem>

                                                                        <MudItem xs="4">
                                                                            <MudTextField Label="Rotor Style" @bind-Value="selectedInspection.RotorStyle" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                                        </MudItem>

                                                                        <MudItem xs="4">
                                                                            <MudTextField Label="Type" @bind-Value="selectedInspection.Type" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                                        </MudItem>

                                                                        <MudItem xs="4">
                                                                            <MudTextField Label="Bearing Removed" @bind-Value="selectedInspection.BearingRemoved" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                                        </MudItem>

                                                                        <MudItem xs="4">
                                                                            <MudTextField Label="Bearings" @bind-Value="selectedInspection.Bearing" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                                        </MudItem>

                                                                        <MudItem xs="4">
                                                                            <MudTextField Label="Bearing Seals" @bind-Value="selectedInspection.BearingSeals" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                                        </MudItem>

                                                                        <MudItem xs="4">
                                                                            <MudTextField Label="Ceramic Seals" @bind-Value="selectedInspection.CeramicSeals" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                                        </MudItem>

                                                                        <MudItem xs="6">
                                                                            <MudTextField Label="Bearing Journal Dia (Left)" @bind-Value="selectedInspection.Left" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                                        </MudItem>

                                                                        <MudItem xs="6">
                                                                            <MudTextField Label="Bearing Journal Dia (Left Details)" @bind-Value="selectedInspection.yLeft" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                                        </MudItem>

                                                                        <MudItem xs="6">
                                                                            <MudTextField Label="Bearing Journal Dia (Right)" @bind-Value="selectedInspection.Right" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                                        </MudItem>

                                                                        <MudItem xs="6">
                                                                            <MudTextField Label="Bearing Journal Dia (Right Details)" @bind-Value="selectedInspection.yRight" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                                        </MudItem>



                                                                        <MudItem xs="4">
                                                                            <MudTextField Label="Basic Sharpening" @bind-Value="selectedInspection.BasicSharpening" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                                        </MudItem>

                                                                        <MudItem xs="4">
                                                                            <MudTextField Label=" Basic Sharpening Details" @bind-Value="selectedInspection.IfYBasicSharpening" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                                        </MudItem>

                                                                        <MudItem xs="4">
                                                                            <MudTextField Label="Wedgelock Alignment Marks; Present" @bind-Value="selectedInspection.WedgelockAlignmentMarks" Variant="Variant.Outlined" FullWidth="true" ReadOnly />

                                                                        </MudItem>

                                                                        <MudItem xs="4">
                                                                            <MudTextField Label="Center Grinding" @bind-Value="selectedInspection.CenterGrinding" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                                        </MudItem>

                                                                        <MudItem xs="4">
                                                                            <MudTextField Label="Center Grinding Detail" @bind-Value="selectedInspection.IfYCenterGrinding" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                                        </MudItem>

                                                                        <MudItem xs="4">
                                                                            <MudTextField Label="Aligned" @bind-Value="selectedInspection.Aligned" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                                        </MudItem>


                                                                        <MudItem xs="4">
                                                                            <MudTextField Label="Welding" @bind-Value="selectedInspection.Welding" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                                        </MudItem>

                                                                        <MudItem xs="4">
                                                                            <MudTextField Label="No. Of Welding" @bind-Value="selectedInspection.WeldingNum" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                                        </MudItem>

                                                                        <MudItem xs="4">
                                                                            <MudTextField Label="Welding Comments" @bind-Value="selectedInspection.Initials" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                                        </MudItem>

                                                                        <MudItem xs="4">
                                                                            <MudTextField Label="Bed Knife in Box" @bind-Value="selectedInspection.BedKnife" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                                        </MudItem>

                                                                        <MudItem xs="4">
                                                                            <MudTextField Label="Re-Profile" @bind-Value="selectedInspection.ReProfile" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                                        </MudItem>

                                                                        <MudItem xs="4">
                                                                            <MudTextField Label="Manual Labor" @bind-Value="selectedInspection.ManualLabor" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                                        </MudItem>

                                                                        <MudItem xs="4">
                                                                            <MudTextField Label="Replace Blades" @bind-Value="selectedInspection.BoxReceivedWithSaddles" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                                        </MudItem>

                                                                        <MudItem xs="4">
                                                                            <MudTextField Label="QTY" @bind-Value="selectedInspection.ADDQTYdata" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                                        </MudItem>

                                                                        <MudItem xs="4">
                                                                            <MudTextField Label="Box Received with Saddles (Bottom)" @bind-Value="selectedInspection.Bottom" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                                        </MudItem>

                                                                        <MudItem xs="4">
                                                                            <MudTextField Label="Box Received with Saddles (Top)" @bind-Value="selectedInspection.Top" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                                        </MudItem>

                                                                        <MudItem xs="4">
                                                                            <MudTextField Label="Plastic Sleeves" @bind-Value="selectedInspection.PlasticSleaves" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                                        </MudItem>

                                                                        <MudItem xs="4">
                                                                            <MudTextField Label="QTY" @bind-Value="selectedInspection.AddQty" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                                        </MudItem>


                                                                        <MudItem xs="4">
                                                                            <MudTextField Label="Saddle Part Number" @bind-Value="selectedInspection.SaddlePartNumber" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                                        </MudItem>

                                                                        <MudItem xs="4">
                                                                            <MudTextField Label="New Box Required" @bind-Value="selectedInspection.NewBoxRequired" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                                        </MudItem>

                                                                        <MudItem xs="4">
                                                                         <MudTextField Label="New Box Part Number" @bind-Value="selectedInspection.NewBoxRequiredBox" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                                        </MudItem>

                                                                    <MudItem xs="6">
                                                                        <MudTextField Label="Rotor Categorize" @bind-Value="selectedInspection.RotorCategorization" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                                    </MudItem>

                                                                    <MudItem xs="6">
                                                                        <MudTextField Label="Sub-Module" @bind-Value="selectedInspection.ComponentType" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                                    </MudItem>

                                                                    <MudItem xs="4">
                                                                        <MudTextField Label="Sales Order" @bind-Value="@selectedInspection.SalesOrderNumber" Variant="Variant.Outlined" ReadOnly />
                                                                    </MudItem>
                                                                    <MudItem xs="4">
                                                                        <MudTextField Label="Job Order" @bind-Value="@selectedInspection.WorkOrder" Variant="Variant.Outlined" ReadOnly />
                                                                    </MudItem>
                                                                    <MudItem xs="4">
                                                                        <MudTextField Label="Mat#" @bind-Value="@selectedInspection.MatNumber" Variant="Variant.Outlined" ReadOnly />
                                                                    </MudItem>

                                                                    <MudItem xs="4">
                                                                        <MudTextField Label="Target Date" @bind-Value="selectedInspection.TargetDate" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                                    </MudItem>

                                                                    <MudItem xs="4">
                                                                        <MudTextField Label="Customer Priority" @bind-Value="selectedInspection.CustomerImportance" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                                    </MudItem>

                                                                    <MudItem xs="4">
                                                                        <MudTextField Label="Customer Instructions" @bind-Value="selectedInspection.CustomerInstructions" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                                    </MudItem>

                                                                    <MudItem md="12" sm="12" xs="12">
                                                                        <MudSelect Variant="Variant.Outlined" @bind-Value="SelectedsimpleWorkCenters"
                                                                        AnchorOrigin="Origin.BottomCenter" Label="Work Centers"
                                                                        OpenIcon="@Icons.Material.Filled.LocationCity" AdornmentColor="Color.Primary">
                                                                            @if (MESWorkcenters != null)
                                                                            {
                                                                                @foreach (var location in MESWorkcenters.OrderBy(l => l.Workcenters))
                                                                                {
                                                                                  <MudSelectItem Value="@location.Workcenters">@location.Workcenters</MudSelectItem>
                                                                                }
                                                                            }
                                                                        </MudSelect>
                                                                    </MudItem>

                                                                </MudGrid>
                                                                <br />

                                                                <MudItem Class="d-flex justify-end " md="12" sm="12" xs="12">


                                                                    <MudButton Class="mr-2" Variant="Variant.Filled" Size="Size.Small" Color="Color.Primary" OnClick="Submitsimplerotors">SUBMIT</MudButton>
                                                                    <MudButton Variant="Variant.Filled" Size="Size.Small" Color="Color.Error" OnClick="ClearAll">Clear</MudButton>

                                                                </MudItem>





                                            }

                                                    </MudPaper>
                                                </MudItem>
                                }

                                    </MudGrid>
                        }


                            <MudList>
                                <MudListItem Class="cursor-pointer" @onclick="ToggleAdvanceRotor">▶ Advance</MudListItem>
                            </MudList>
                        @if (ShowAdvanceRotorFilters)
                        {
                                    <MudGrid Spacing="3">
                                        <!-- Left Panel: Search & List -->
                                        <MudItem xs="12" md="4">
                                            <MudPaper Elevation="3" Class="pa-3">
                                                <MudTextField @bind-Value="searchTerm" Placeholder="Search..." Adornment="Adornment.Start" AdornmentIcon="@Icons.Material.Filled.Search" FullWidth="true" />
                                                <MudList Dense="true">
                                            @foreach (var item in advanceRotorList.Where(i => i.SerialNumber.Contains(searchTerm, StringComparison.OrdinalIgnoreCase)))
                                            {
                                                            <MudListItem Button="true" OnClick="() => SelectAdvanceInspection(item)" Class="@(hoveredInspection == item ? "hover-highlight" : null)"
                                                            @onmouseover="() => hoveredInspection = item"
                                                            @onmouseout="() => hoveredInspection = null">
                                                                <MudText>@item.SerialNumber - @item.Customer - @item.RotorsNumber</MudText>
                                                            </MudListItem>
                                            }
                                                </MudList>
                                            </MudPaper>
                                        </MudItem>

                                @if (selectedAdvanceInspection != null)
                                {
                                                <MudItem xs="12" md="8">
                                                    <MudPaper Elevation="3" Class="pa-3" Style="overflow: visible;">
                                            @if (selectedAdvanceInspection != null)
                                            {
                                                                <MudGrid>

                                                                <MudItem xs="4">
                                                        <MudTextField Label="Customer" @bind-Value="selectedAdvanceInspection.Customer" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                                </MudItem>
                                                                <MudItem xs="4">
                                                                    <MudTextField Label="Location" @bind-Value="selectedAdvanceInspection.Location" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                                </MudItem>
                                                                <MudItem xs="4">
                                                                    <MudTextField Label="Inspected Date" @bind-Value="selectedAdvanceInspection.Received" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                                </MudItem>
                                                                <MudItem xs="4">
                                                                    <MudTextField Label="Inspected by" @bind-Value="selectedAdvanceInspection.Inspected" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                                </MudItem>

                                                                <MudItem xs="4">
                                                                    <MudTextField Label="Rotors Serial Number" @bind-Value="selectedAdvanceInspection.RotorsNumber" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                                </MudItem>

                                                               

                                                                <MudItem xs="4">
                                                                    <MudTextField Label="Make" @bind-Value="selectedAdvanceInspection.Make" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                                </MudItem>

                                                                <MudItem xs="4">
                                                                    <MudTextField Label="Dia" @bind-Value="selectedAdvanceInspection.Dia" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                                </MudItem>

                                                                <MudItem xs="4">
                                                                    <MudTextField Label="Len" @bind-Value="selectedAdvanceInspection.Len" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                                </MudItem>

                                                                <MudItem xs="4">
                                                                    <MudTextField Label="Flts" @bind-Value="selectedAdvanceInspection.Fits" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                                </MudItem>

                                                                <MudItem xs="4">
                                                                    <MudTextField Label="Material" @bind-Value="selectedAdvanceInspection.Materials" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                                </MudItem>

                                                                <MudItem xs="4">
                                                                    <MudTextField Label="Other" @bind-Value="selectedAdvanceInspection.Others" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                                </MudItem>

                                                                <MudItem xs="4">

                                                                    <MudTextField Label="Incoming Rotor Dia." @bind-Value="selectedAdvanceInspection.RotorsDia" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                                </MudItem>

                                                                <MudItem xs="4">
                                                                    <MudTextField Label="Rotor Style" @bind-Value="selectedAdvanceInspection.RotorStyle" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                                </MudItem>

                                                                <MudItem xs="4">
                                                                    <MudTextField Label="Type" @bind-Value="selectedAdvanceInspection.Type" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                                </MudItem>

                                                                <MudItem xs="4">
                                                                    <MudTextField Label="Bearing Removed" @bind-Value="selectedAdvanceInspection.BearingRemoved" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                                </MudItem>

                                                                <MudItem xs="4">
                                                                    <MudTextField Label="Bearings" @bind-Value="selectedAdvanceInspection.Bearing" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                                </MudItem>

                                                                <MudItem xs="4">
                                                                    <MudTextField Label="Bearing Seals" @bind-Value="selectedAdvanceInspection.BearingSeals" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                                </MudItem>

                                                                <MudItem xs="4">
                                                                    <MudTextField Label="Ceramic Seals" @bind-Value="selectedAdvanceInspection.CeramicSeals" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                                </MudItem>

                                                                <MudItem xs="6">
                                                                    <MudTextField Label="Bearing Journal Dia (Left)" @bind-Value="selectedAdvanceInspection.Left" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                                </MudItem>

                                                                <MudItem xs="6">
                                                        <MudTextField Label="Bearing Journal Dia (Left Details)" @bind-Value="selectedAdvanceInspection.yLeft" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                                </MudItem>

                                                                <MudItem xs="6">
                                                                    <MudTextField Label="Bearing Journal Dia (Right)" @bind-Value="selectedAdvanceInspection.Right" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                                </MudItem>

                                                                <MudItem xs="6">
                                                                    <MudTextField Label="Bearing Journal Dia (Right Details)" @bind-Value="selectedAdvanceInspection.yRight" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                                </MudItem>



                                                                <MudItem xs="4">
                                                                    <MudTextField Label="Basic Sharpening" @bind-Value="selectedAdvanceInspection.BasicSharpening" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                                </MudItem>

                                                                <MudItem xs="4">
                                                                    <MudTextField Label="Basic Sharpening Details" @bind-Value="selectedAdvanceInspection.IfYBasicSharpening" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                                </MudItem>

                                                                <MudItem xs="4">
                                                                    <MudTextField Label="Wedgelock Alignment Marks; Present" @bind-Value="selectedAdvanceInspection.WedgelockAlignmentMarks" Variant="Variant.Outlined" FullWidth="true" ReadOnly />

                                                                </MudItem>

                                                                <MudItem xs="4">
                                                                    <MudTextField Label="Center Grinding" @bind-Value="selectedAdvanceInspection.CenterGrinding" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                                </MudItem>

                                                                <MudItem xs="4">
                                                                    <MudTextField Label="Center Grinding Detail" @bind-Value="selectedAdvanceInspection.IfYCenterGrinding" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                                </MudItem>

                                                                <MudItem xs="4">
                                                                    <MudTextField Label="Aligned" @bind-Value="selectedAdvanceInspection.Aligned" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                                </MudItem>


                                                                <MudItem xs="4">
                                                                    <MudTextField Label="Welding" @bind-Value="selectedAdvanceInspection.Welding" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                                </MudItem>

                                                                <MudItem xs="4">
                                                                    <MudTextField Label="No. Of Welding" @bind-Value="selectedAdvanceInspection.WeldingNum" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                                </MudItem>

                                                                <MudItem xs="4">
                                                                    <MudTextField Label="Welding Comments" @bind-Value="selectedAdvanceInspection.Initials" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                                </MudItem>

                                                                <MudItem xs="4">
                                                                    <MudTextField Label="Bed Knife in Box" @bind-Value="selectedAdvanceInspection.BedKnife" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                                </MudItem>

                                                                <MudItem xs="4">
                                                                    <MudTextField Label="Re-Profile" @bind-Value="selectedAdvanceInspection.ReProfile" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                                </MudItem>

                                                                <MudItem xs="4">
                                                                    <MudTextField Label="Manual Labor" @bind-Value="selectedAdvanceInspection.ManualLabor" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                                </MudItem>

                                                                <MudItem xs="4">
                                                                    <MudTextField Label="Replace Blades" @bind-Value="selectedAdvanceInspection.BoxReceivedWithSaddles" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                                </MudItem>

                                                                <MudItem xs="4">
                                                        <MudTextField Label="QTY" @bind-Value="selectedAdvanceInspection.ADDQTYdata" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                                </MudItem>

                                                                <MudItem xs="4">
                                                                    <MudTextField Label="Box Received with Saddles (Bottom)" @bind-Value="selectedAdvanceInspection.Bottom" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                                </MudItem>

                                                                <MudItem xs="4">
                                                           <MudTextField Label="Box Received with Saddles (Top)" @bind-Value="selectedAdvanceInspection.Top" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                                </MudItem>

                                                                <MudItem xs="4">
                                                                    <MudTextField Label="Plastic Sleeves" @bind-Value="selectedAdvanceInspection.PlasticSleaves" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                                </MudItem>

                                                                <MudItem xs="4">
                                                            <MudTextField Label="QTY" @bind-Value="selectedAdvanceInspection.AddQty" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                                </MudItem>


                                                                <MudItem xs="4">
                                                                    <MudTextField Label="Saddle Part Number" @bind-Value="selectedAdvanceInspection.SaddlePartNumber" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                                </MudItem>

                                                                <MudItem xs="4">
                                                                    <MudTextField Label="New Box Required" @bind-Value="selectedAdvanceInspection.NewBoxRequired" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                                </MudItem>

                                                                <MudItem xs="4">
                                                                 <MudTextField Label="New Box Part Number" @bind-Value="selectedAdvanceInspection.NewBoxRequiredBox" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                                </MudItem>



                                                                    <MudItem xs="6">
                                                                        <MudTextField Label="Rotor Categorize" @bind-Value="selectedAdvanceInspection.RotorCategorization" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                                    </MudItem>

                                                                    <MudItem xs="6">
                                                                        <MudTextField Label="Sub-Module" @bind-Value="selectedAdvanceInspection.ComponentType" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                                    </MudItem>

                                                                    <MudItem xs="4">
                                                                        <MudTextField Label="Sales Order" @bind-Value="@selectedAdvanceInspection.SalesOrderNumber" Variant="Variant.Outlined" ReadOnly />
                                                                    </MudItem>
                                                                    <MudItem xs="4">
                                                                        <MudTextField Label="Work Order" @bind-Value="@selectedAdvanceInspection.WorkOrder" Variant="Variant.Outlined" ReadOnly />
                                                                    </MudItem>
                                                                    <MudItem xs="4">
                                                                        <MudTextField Label="Mat#" @bind-Value="@selectedAdvanceInspection.MatNumber" Variant="Variant.Outlined" ReadOnly />
                                                                    </MudItem>

                                                                    <MudItem xs="4">
                                                                        <MudTextField Label="Target Date" @bind-Value="selectedAdvanceInspection.TargetDate" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                                    </MudItem>

                                                                    <MudItem xs="4">
                                                                        <MudTextField Label="Customer Priority" @bind-Value="selectedAdvanceInspection.CustomerImportance" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                                    </MudItem>

                                                                    <MudItem xs="4">
                                                                        <MudTextField Label="Customer Instructions" @bind-Value="selectedAdvanceInspection.CustomerInstructions" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                                    </MudItem>

                                                                    <MudItem md="12" sm="12" xs="12">
                                                                        <MudSelect Variant="Variant.Outlined" @bind-Value="SelectedAdvancedSharping" AnchorOrigin="Origin.BottomCenter" Label="Advanced Sharping" OpenIcon="@Icons.Material.Filled.Quiz" AdornmentColor="Color.Primary">
                                                                                    @foreach (var ads in AdvancedSharpingStatus)
                                                                                    {
                                                                                        bool isDone = rotorproductionSavedDatas
                                                                                        .Any(r => r.AdvancedSharpingStatus == ads);
                                                                                                            <MudSelectItem Value="@ads">@ads
                                                                                            @if (isDone)
                                                                                        {
                                                                                                                <MudIcon Icon="@Icons.Material.Filled.Check" Color="Color.Success" Class="ml-2" />
                                                                                        }
                                                                                                        </MudSelectItem>
                                                                                    }
                                                                        </MudSelect>
                                                                    </MudItem>
                                                    @if (SelectedAdvancedSharping == "Completed")
                                                    {
                                                                            <MudItem md="12" sm="12" xs="12">
                                                                                <MudSelect Variant="Variant.Outlined" @bind-Value="SelectedWorkCenters"
                                                                                AnchorOrigin="Origin.BottomCenter" Label="Work Centers"
                                                                                OpenIcon="@Icons.Material.Filled.LocationCity" AdornmentColor="Color.Primary">
                                                                                    @if (MESWorkcenters != null)
                                                                                    {
                                                                                        @foreach (var location in MESWorkcenters.OrderBy(l => l.Workcenters))
                                                                                        {
                                                                                          <MudSelectItem Value="@location.Workcenters">@location.Workcenters</MudSelectItem>
                                                                                        }
                                                                                    }
                                                                                </MudSelect>
                                                                            </MudItem>

                                                    }


                                                                </MudGrid>
                                                                <br />

                                                                <MudItem Class="d-flex justify-end " md="12" sm="12" xs="12">
                                                    @if (SelectedAdvancedSharping != "Completed")
                                                    {
                                                                            <MudButton Class="mr-2" Variant="Variant.Filled" Size="Size.Small" Color="Color.Primary" OnClick="SaveAdvancedData">SAVE</MudButton>
                                                    }

                                                    @if (SelectedAdvancedSharping == "Completed")
                                                    {
                                                                            <MudButton Class="mr-2" Variant="Variant.Filled" Size="Size.Small" Color="Color.Primary" OnClick="SubmitAdvancedData">SUBMIT</MudButton>
                                                    }
                                                                    <MudButton Variant="Variant.Filled" Size="Size.Small" Color="Color.Error" OnClick="ClearAll">Clear</MudButton>

                                                                </MudItem>





                                            }

                                                    </MudPaper>
                                                </MudItem>
                                }

                                    </MudGrid>
                        }



                            <MudList>
                                <MudListItem Class="cursor-pointer" @onclick="Togglenewrotors">▶ New</MudListItem>
                            </MudList>


                        </MudList>


                }
            </MudPaper>

            <!-- Feed Roll Section -->
            <MudPaper Class="pa-4 mb-2">
                <MudText Typo="Typo.h6" Class="cursor-pointer" @onclick="Togglefeedroles">
                    ▶ Feed Rolls (@(feedRollList?.Count ?? 0))
                </MudText>
                @if (ShowfeedrolesFilters)
                {
                        <MudGrid Spacing="3">
                            <!-- Left Panel: Search & List -->
                            <MudItem xs="12" md="4">
                                <MudPaper Elevation="3" Class="pa-3">
                                    <MudTextField @bind-Value="searchTerm" Placeholder="Search..." Adornment="Adornment.Start" AdornmentIcon="@Icons.Material.Filled.Search" FullWidth="true" />
                                    <MudList Dense="true">
                                    @foreach (var item in feedRollList.Where(i => i.SerialNumber.Contains(searchTerm, StringComparison.OrdinalIgnoreCase)))
                                    {
                                                <MudListItem Button="true" OnClick="() => SelectFeedRoleInspection(item)" Class="@(hoveredInspection == item ? "hover-highlight" : null)"
                                                @onmouseover="() => hoveredInspection = item"
                                                @onmouseout="() => hoveredInspection = null">
                                                    <MudText>@item.SerialNumber - @item.Customer - @item.RotorsNumber</MudText>
                                                </MudListItem>
                                    }
                                    </MudList>
                                </MudPaper>
                            </MudItem>

                        @if (selectedfeedroleInspection != null)
                        {
                                    <MudItem xs="12" md="8">
                                        <MudPaper Elevation="3" Class="pa-3" Style="overflow: visible;">
                                    @if (selectedfeedroleInspection != null)
                                    {
                                                    <MudGrid>


                                                        <MudItem xs="4">
                                                <MudTextField Label="Customer" @bind-Value="selectedfeedroleInspection.Customer" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>
                                                        <MudItem xs="4">
                                                            <MudTextField Label="Location" @bind-Value="selectedfeedroleInspection.Location" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>
                                                        <MudItem xs="4">
                                                            <MudTextField Label="Inspected Date" @bind-Value="selectedfeedroleInspection.Received" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>
                                                        <MudItem xs="4">
                                                            <MudTextField Label="Inspected by" @bind-Value="selectedfeedroleInspection.Inspected" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Rotors Serial Number" @bind-Value="selectedfeedroleInspection.RotorsNumber" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>

                                                       
                                                        <MudItem xs="4">
                                                            <MudTextField Label="Make" @bind-Value="selectedfeedroleInspection.Make" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Dia" @bind-Value="selectedfeedroleInspection.Dia" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Len" @bind-Value="selectedfeedroleInspection.Len" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Flts" @bind-Value="selectedfeedroleInspection.Fits" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Materials" @bind-Value="selectedfeedroleInspection.Materials" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Others" @bind-Value="selectedfeedroleInspection.Others" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>

                                                        <MudItem xs="4">

                                                            <MudTextField Label="Incoming Rotor Dia." @bind-Value="selectedfeedroleInspection.RotorsDia" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Rotor Style" @bind-Value="selectedfeedroleInspection.RotorStyle" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Type" @bind-Value="selectedfeedroleInspection.Type" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Bearing Removed" @bind-Value="selectedfeedroleInspection.BearingRemoved" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Bearings" @bind-Value="selectedfeedroleInspection.Bearing" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Bearing Seals" @bind-Value="selectedfeedroleInspection.BearingSeals" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Ceramic Seals" @bind-Value="selectedfeedroleInspection.CeramicSeals" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                        </MudItem>

                                                        <MudItem xs="6">
                                                <MudTextField Label="Bearing Journal Dia (Left)" @bind-Value="selectedfeedroleInspection.Left" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                        </MudItem>

                                                        <MudItem xs="6">
                                                            <MudTextField Label="Bearing Journal Dia (Left Details)" @bind-Value="selectedfeedroleInspection.yLeft" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                        </MudItem>

                                                        <MudItem xs="6">
                                                            <MudTextField Label="Bearing Journal Dia (Right)" @bind-Value="selectedfeedroleInspection.Right" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                        </MudItem>

                                                        <MudItem xs="6">
                                                            <MudTextField Label="Bearing Journal Dia (Right Details)" @bind-Value="selectedfeedroleInspection.yRight" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                        </MudItem>



                                                        <MudItem xs="4">
                                                            <MudTextField Label="Basic Sharpening" @bind-Value="selectedfeedroleInspection.BasicSharpening" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label=" Basic Sharpening Details" @bind-Value="selectedfeedroleInspection.IfYBasicSharpening" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Wedgelock Alignment Marks; Present" @bind-Value="selectedfeedroleInspection.WedgelockAlignmentMarks" Variant="Variant.Outlined" FullWidth="true" ReadOnly />

                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Center Grinding" @bind-Value="selectedfeedroleInspection.CenterGrinding" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                        </MudItem>

                                                        <MudItem xs="4">
                                                <MudTextField Label="Center Grinding Detail" @bind-Value="selectedfeedroleInspection.IfYCenterGrinding" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Aligned" @bind-Value="selectedfeedroleInspection.Aligned" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                        </MudItem>


                                                        <MudItem xs="4">
                                                            <MudTextField Label="Welding" @bind-Value="selectedfeedroleInspection.Welding" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="No. Of Welding" @bind-Value="selectedfeedroleInspection.WeldingNum" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                        </MudItem>

                                                        <MudItem xs="4">
                                                <MudTextField Label="Welding Comments" @bind-Value="selectedfeedroleInspection.Initials" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Bed Knife in Box" @bind-Value="selectedfeedroleInspection.BedKnife" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Re-Profile" @bind-Value="selectedfeedroleInspection.ReProfile" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Manual Labor" @bind-Value="selectedfeedroleInspection.ManualLabor" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>

                                                        <MudItem xs="4">
                                                <MudTextField Label="Replace Blades" @bind-Value="selectedfeedroleInspection.BoxReceivedWithSaddles" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="QTY" @bind-Value="selectedfeedroleInspection.ADDQTYdata" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Box Received with Saddles (Bottom)" @bind-Value="selectedfeedroleInspection.Bottom" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                        </MudItem>

                                                        <MudItem xs="4">
                                                <MudTextField Label="Box Received with Saddles (Top)" @bind-Value="selectedfeedroleInspection.Top" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Plastic Sleeves" @bind-Value="selectedfeedroleInspection.PlasticSleaves" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="QTY" @bind-Value="selectedfeedroleInspection.AddQty" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>


                                                        <MudItem xs="4">
                                                <MudTextField Label="Saddle Part Number" @bind-Value="selectedfeedroleInspection.SaddlePartNumber" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="New Box Required" @bind-Value="selectedfeedroleInspection.NewBoxRequired" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="New Box Required Number" @bind-Value="selectedfeedroleInspection.NewBoxRequiredBox" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>

                                                        <MudItem xs="6">
                                                            <MudTextField Label="Rotor Categorize" @bind-Value="selectedfeedroleInspection.RotorCategorization" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>

                                                        <MudItem xs="6">
                                                            <MudTextField Label="Sub-Module" @bind-Value="selectedfeedroleInspection.ComponentType" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Sales Order" @bind-Value="@selectedfeedroleInspection.SalesOrderNumber" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>
                                                        <MudItem xs="4">
                                                            <MudTextField Label="Work Order" @bind-Value="@selectedfeedroleInspection.WorkOrder" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>
                                                        <MudItem xs="4">
                                                            <MudTextField Label="Mat#" @bind-Value="@selectedfeedroleInspection.MatNumber" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Target Date" @bind-Value="selectedfeedroleInspection.TargetDate" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Customer Priority" @bind-Value="selectedfeedroleInspection.CustomerImportance" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Customer Instructions" @bind-Value="selectedfeedroleInspection.CustomerInstructions" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>

                                                        <MudItem md="12" sm="12" xs="12">
                                                            <MudSelect Variant="Variant.Outlined" @bind-Value="SelectedFeedRoleWorkCenters"
                                                            AnchorOrigin="Origin.BottomCenter" Label="Work Centers"
                                                            OpenIcon="@Icons.Material.Filled.LocationCity" AdornmentColor="Color.Primary">
                                                    @if (MESWorkcenters != null)
                                                    {
                                                        @foreach (var location in MESWorkcenters.OrderBy(l => l.Workcenters))
                                                        {
                                                                                <MudSelectItem Value="@location.Workcenters">@location.Workcenters</MudSelectItem>
                                                        }
                                                    }
                                                            </MudSelect>
                                                        </MudItem>

                                                    </MudGrid>
                                                    <br />

                                                    <MudItem Class="d-flex justify-end " md="12" sm="12" xs="12">
                                                        <MudButton Class="mr-2" Variant="Variant.Filled" Size="Size.Small" Color="Color.Primary" OnClick="SubmitFeedRoles">SUBMIT</MudButton>
                                                        <MudButton Variant="Variant.Filled" Size="Size.Small" Color="Color.Error" OnClick="ClearAll">Clear</MudButton>

                                                    </MudItem>





                                    }

                                        </MudPaper>
                                    </MudItem>
                        }

                        </MudGrid>
                }

            </MudPaper>

            <!-- Scrap Roll Section -->
            <MudPaper Class="pa-4 mb-2">
                <MudText Typo="Typo.h6" Class="cursor-pointer" @onclick="Togglescrap">
                    ▶ Scrap (@(scrapList?.Count ?? 0))
                </MudText>

                @if (ShowscrapFilters)
                {
                        <MudGrid Spacing="3">
                            <!-- Left Panel: Search & List -->
                            <MudItem xs="12" md="4">
                                <MudPaper Elevation="3" Class="pa-3">
                                    <MudTextField @bind-Value="searchTerm" Placeholder="Search..." Adornment="Adornment.Start" AdornmentIcon="@Icons.Material.Filled.Search" FullWidth="true" />
                                    <MudList Dense="true">
                                    @foreach (var item in scrapList.Where(i => i.SerialNumber.Contains(searchTerm, StringComparison.OrdinalIgnoreCase)))
                                    {
                                                <MudListItem Button="true" OnClick="() => SelectScrapInspection(item)" Class="@(hoveredInspection == item ? "hover-highlight" : null)"
                                                @onmouseover="() => hoveredInspection = item"
                                                @onmouseout="() => hoveredInspection = null">
                                                    <MudText>@item.SerialNumber - @item.Customer - @item.RotorsNumber</MudText>
                                                </MudListItem>
                                    }
                                    </MudList>
                                </MudPaper>
                            </MudItem>

                        @if (selectedscrapInspection != null)
                        {
                                    <MudItem xs="12" md="8">
                                        <MudPaper Elevation="3" Class="pa-3" Style="overflow: visible;">
                                    @if (selectedscrapInspection != null)
                                    {
                                                    <MudGrid>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Customer" @bind-Value="selectedscrapInspection.Customer" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>
                                                        <MudItem xs="4">
                                                            <MudTextField Label="Location" @bind-Value="selectedscrapInspection.Location" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>
                                                        <MudItem xs="4">
                                                            <MudTextField Label="Received" @bind-Value="selectedscrapInspection.Received" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>
                                                        <MudItem xs="4">
                                                            <MudTextField Label="Inspected" @bind-Value="selectedscrapInspection.Inspected" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Rotors#" @bind-Value="selectedscrapInspection.RotorsNumber" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Initials" @bind-Value="selectedscrapInspection.Initials" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Make" @bind-Value="selectedscrapInspection.Make" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Dia" @bind-Value="selectedscrapInspection.Dia" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Len" @bind-Value="selectedscrapInspection.Len" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Fits" @bind-Value="selectedscrapInspection.Fits" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Material" @bind-Value="selectedscrapInspection.Materials" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Other" @bind-Value="selectedscrapInspection.Others" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>

                                                        <MudItem xs="4">

                                                            <MudTextField Label="Rotor Dia." @bind-Value="selectedscrapInspection.RotorsDia" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Rotor Style" @bind-Value="selectedscrapInspection.RotorStyle" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Type" @bind-Value="selectedscrapInspection.Type" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Bearing Removed" @bind-Value="selectedscrapInspection.BearingRemoved" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Bearings" @bind-Value="selectedscrapInspection.Bearing" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Bearing Seals" @bind-Value="selectedscrapInspection.BearingSeals" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Ceramic Seals" @bind-Value="selectedscrapInspection.CeramicSeals" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Bearing Journal Dia (Right)" @bind-Value="selectedscrapInspection.Right" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Bearing Journal Dia (Left)" @bind-Value="selectedscrapInspection.Left" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Bearing Journal Dia (Left Detail)" @bind-Value="selectedscrapInspection.yLeft" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Basic Sharpening" @bind-Value="selectedscrapInspection.BasicSharpening" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Basic Sharpening Detail" @bind-Value="selectedscrapInspection.IfYBasicSharpening" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Wedgelock Alignment Marks; Present" @bind-Value="selectedscrapInspection.BasicSharpening" Variant="Variant.Outlined" FullWidth="true" ReadOnly />

                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Center Grinding" @bind-Value="selectedscrapInspection.CenterGrinding" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Center Grinding Detail" @bind-Value="selectedscrapInspection.IfYCenterGrinding" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Aligned" @bind-Value="selectedscrapInspection.Aligned" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Plastic Sleeves" @bind-Value="selectedscrapInspection.PlasticSleaves" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Welding" @bind-Value="selectedscrapInspection.Welding" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Welding Number" @bind-Value="selectedscrapInspection.WeldingNum" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Bed Knife in Box" @bind-Value="selectedscrapInspection.BedKnife" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Replace Blades" @bind-Value="selectedscrapInspection.BoxReceivedWithSaddles" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Re-Profile" @bind-Value="selectedscrapInspection.ReProfile" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Sand Blasting" @bind-Value="selectedscrapInspection.SandBlasting" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                        </MudItem>
                                                        <MudItem xs="4">
                                                            <MudTextField Label="Manual Labor" @bind-Value="selectedscrapInspection.ManualLabor" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Box Received with Saddles (Bottom)" @bind-Value="selectedscrapInspection.Bottom" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Box Received with Saddles (Top)" @bind-Value="selectedscrapInspection.Top" FullWidth="true" Variant="Variant.Outlined" ReadOnly />

                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="QTY" @bind-Value="selectedscrapInspection.AddQty" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Set-up Tir Left Journal" @bind-Value="selectedscrapInspection.TirLeftJournal" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>
                                                        <MudItem xs="4">
                                                            <MudTextField Label="Set-up Tir Right Journal" @bind-Value="selectedscrapInspection.TirRightJournal" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Saddle Part Number" @bind-Value="selectedscrapInspection.SaddlePartNumber" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>

                                                        <MudItem xs="6">
                                                            <MudTextField Label="Rotor Categorize" @bind-Value="selectedscrapInspection.RotorCategorization" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>

                                                        <MudItem xs="6">
                                                            <MudTextField Label="Sub-Module" @bind-Value="selectedscrapInspection.ComponentType" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Sales Order" @bind-Value="@selectedscrapInspection.SalesOrderNumber" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>
                                                        <MudItem xs="4">
                                                            <MudTextField Label="Work Order" @bind-Value="@selectedscrapInspection.WorkOrder" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>
                                                        <MudItem xs="4">
                                                            <MudTextField Label="Mat#" @bind-Value="@selectedscrapInspection.MatNumber" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Target Date" @bind-Value="selectedscrapInspection.TargetDate" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Customer Priority" @bind-Value="selectedscrapInspection.CustomerImportance" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>

                                                        <MudItem xs="4">
                                                            <MudTextField Label="Customer Instructions" @bind-Value="selectedscrapInspection.CustomerInstructions" FullWidth="true" Variant="Variant.Outlined" ReadOnly />
                                                        </MudItem>



                                                    </MudGrid>
                                                    <br />

                                                    <MudItem Class="d-flex justify-end " md="12" sm="12" xs="12">
                                                        <MudButton Class="mr-2" Variant="Variant.Filled" Size="Size.Small" Color="Color.Error" OnClick="DeleteScrap">Delete</MudButton>

                                                    </MudItem>





                                    }

                                        </MudPaper>
                                    </MudItem>
                        }

                        </MudGrid>
                }

            </MudPaper>


              <!-- Damage Grinding Section -->
            <MudPaper Class="pa-4 mb-2">
                <div class="cursor-pointer" @onclick="NavigateToDamageGrinding">
                    <MudText Typo="Typo.h6">
                        ▶ Damage During Grinding (@(damageinspections?.Count ?? 0))
                    </MudText>
                </div>
            </MudPaper>


        </MudItem>
    </MudGrid>
</MudContainer>



<style>

    .hover-highlight {
    background-color: #c4c4c4;
    cursor: pointer;
    }

    .overflow-visible {
    overflow: visible !important;
    }

</style>


@code {


    [Inject] private IDialogService DialogService { get; set; } = default!;

    private List<RotorProductionData> RotorProductionDatas = new();
    private List<RotorSalesData> rotorSalesDatas = new();
    private List<RotorSalesData> rotorList = new();
    private List<RotorSalesData> feedRollList = new();
    private List<RotorSalesData> simpleRotorList = new();
    private List<RotorSalesData> advanceRotorList = new();
    private string searchTerm = "";
    bool ShowRotorFilters = false;
    private RotorSalesData selectedInspection;
    private RotorSalesData? hoveredInspection;
    bool ShowfeedrolesFilters = false;
    private List<MESWorkcenters>? MESWorkcenters { get; set; } = new List<MESWorkcenters>();
    private string? SelectedWorkCenters { get; set; }
    bool ShowSimpleRotorFilters = false;
    bool ShowAdvanceRotorFilters = false;
    private string? SelectedAdvancedSharping { get; set; }
    private List<string> AdvancedSharpingStatus = new List<string>();
    private RotorSalesData selectedAdvanceInspection;
    private List<RotorProductionSavedData> rotorproductionSavedDatas = new();
    private bool _hasFetchedIncomingData = false;
    private RotorSalesData selectedfeedroleInspection;
    private string? SelectedFeedRoleWorkCenters { get; set; }
    private string? SelectedsimpleWorkCenters { get; set; }
    private List<RotorSalesData> scrapList = new();
    bool ShowscrapFilters = false;
    private RotorSalesData selectedscrapInspection;

    private List<RotorDamageGrindingSubmitedData> RotorGrindingSubitedDatas = new();
    private List<RotorDamageGrindingDataFromGrinding> damageinspections = new();
    private bool isLoading = false;
    private string errorMessage = "";


      bool ShowdamagegrindingFilters = false;

    protected override async Task OnInitializedAsync()
    {
        AdvancedSharpingStatus.Add("Welding");
        AdvancedSharpingStatus.Add("Chroming");
        AdvancedSharpingStatus.Add("Other Operations");
        AdvancedSharpingStatus.Add("Completed");

        // get Work Centers
        HttpClient = _httpClient.CreateClient("ITS.ServerAPI");
        var workcenterResponse = await HttpClient.GetAsync(ApiConstants.GetMESWorkcenters);

        if (workcenterResponse.IsSuccessStatusCode)
        {
            var locationResult = await workcenterResponse.Content.ReadFromJsonAsync<List<MESWorkcenters>>();

            if (locationResult != null)
            {
                MESWorkcenters = locationResult.OrderByDescending(l => l.Id).ToList();
            }
        }

        await FetchAllInspections();


    }


    private async Task FetchAllInspections()
    {
        // Get all existing RotorProductionData
        HttpClient = _httpClient.CreateClient("ITS.ServerAPI");
        var rotorSalesDatasResponse = await HttpClient.GetAsync(ApiConstants.GetAllProductionData);

        if (rotorSalesDatasResponse.IsSuccessStatusCode)
        {
            var productionDataJson = await rotorSalesDatasResponse.Content.ReadAsStringAsync();

            if (!string.IsNullOrEmpty(productionDataJson))
            {
                RotorProductionDatas = JsonSerializer.Deserialize<List<RotorProductionData>>(productionDataJson,
                    new JsonSerializerOptions { PropertyNameCaseInsensitive = true }) ?? new List<RotorProductionData>();
            }
        }


        // fetching all sales data
        HttpClient = _httpClient.CreateClient("ITS.ServerAPI");
        var rotorSalesDatasresponse = await HttpClient.GetAsync(ApiConstants.GetAllSalesData);
        if (rotorSalesDatasresponse.IsSuccessStatusCode)
        {
            var data = await rotorSalesDatasresponse.Content.ReadAsStringAsync();
            var allrotorSalesDatas = JsonSerializer.Deserialize<List<RotorSalesData>>(data,
                new JsonSerializerOptions { PropertyNameCaseInsensitive = true }) ?? new List<RotorSalesData>();


            rotorSalesDatas = allrotorSalesDatas
               .Where(i => !RotorProductionDatas.Any(r =>
                   string.Equals(r.SerialNumber, i.SerialNumber, StringComparison.OrdinalIgnoreCase) &&
                   string.Equals(r.Module, i.Module, StringComparison.OrdinalIgnoreCase) &&
                   string.Equals(r.RotorsNumber, i.RotorsNumber, StringComparison.OrdinalIgnoreCase)))
               .ToList();

            // Filtering based on ComponentType
            rotorList = rotorSalesDatas
                .Where(r => r.ComponentType?.Equals("Rotor", StringComparison.OrdinalIgnoreCase) == true)
                .ToList();

            feedRollList = rotorSalesDatas
                .Where(r => r.ComponentType?.Equals("Feed Rolls", StringComparison.OrdinalIgnoreCase) == true)
                .ToList();

            scrapList = rotorSalesDatas
            .Where(r => r.RotorCategorization?.Equals("Scrap", StringComparison.OrdinalIgnoreCase) == true)
            .ToList();

            simpleRotorList = rotorList
           .Where(r => r.RotorCategorization?.Equals("Simple", StringComparison.OrdinalIgnoreCase) == true)
           .ToList();

            advanceRotorList = rotorList
                .Where(r => r.RotorCategorization?.Equals("Advance", StringComparison.OrdinalIgnoreCase) == true)
                .ToList();
        }

        // damage grinding part

        try
        {


            // Get all existing damage grinding submited data
            HttpClient = _httpClient.CreateClient("ITS.ServerAPI");
            var rotordamagegrindingDatasResponse = await HttpClient.GetAsync(ApiConstants.GetAllDDGSubmitedData);

            if (rotordamagegrindingDatasResponse.IsSuccessStatusCode)
            {
                var damageDataJson = await rotordamagegrindingDatasResponse.Content.ReadAsStringAsync();

                if (!string.IsNullOrEmpty(damageDataJson))
                {
                    RotorGrindingSubitedDatas = JsonSerializer.Deserialize<List<RotorDamageGrindingSubmitedData>>(damageDataJson,
                        new JsonSerializerOptions { PropertyNameCaseInsensitive = true }) ?? new List<RotorDamageGrindingSubmitedData>();
                }
            }

            // Get all existing Moved outside operation Rotor grinding Data
            HttpClient = _httpClient.CreateClient("ITS.ServerAPI");
            var rotorgrindingDatasResponse = await HttpClient.GetAsync(ApiConstants.GetAllMovedOOPGrindingData);

            if (rotorgrindingDatasResponse.IsSuccessStatusCode)
            {
                var outsidedata = await rotorgrindingDatasResponse.Content.ReadAsStringAsync();
                var outsidedataallInspections = JsonSerializer.Deserialize<List<RotorDamageGrindingDataFromGrinding>>(outsidedata,
                    new JsonSerializerOptions { PropertyNameCaseInsensitive = true }) ?? new List<RotorDamageGrindingDataFromGrinding>();

                // Filter only those where IsMoveoutsideoperation is true
                // inspections = allInspections.Where(x => x.IsMoveoutsideoperation).ToList();

                damageinspections = outsidedataallInspections
                   .Where(i => !RotorGrindingSubitedDatas.Any(r =>
                       string.Equals(r.SerialNumber, i.SerialNumber, StringComparison.OrdinalIgnoreCase) &&
                       string.Equals(r.Module, i.Module, StringComparison.OrdinalIgnoreCase) &&
                       string.Equals(r.RotorsNumber, i.RotorsNumber, StringComparison.OrdinalIgnoreCase)))
                   .ToList();

            }



        }
        catch (Exception ex)
        {
            errorMessage = $"Exception: {ex.Message}";
        }
        finally
        {
            isLoading = false;
        }

    }



    // advance part
    void ToggleAdvanceRotor()
    {
        ShowAdvanceRotorFilters = !ShowAdvanceRotorFilters;
    }

    private async Task SelectAdvanceInspection(RotorSalesData advanceinspection)
    {
        selectedAdvanceInspection = advanceinspection;

        try
        {
            // Fetch rotor production saved data
            HttpClient = _httpClient.CreateClient("ITS.ServerAPI");
            var rotorSalesDatasresponse = await HttpClient.GetAsync(
                $"{ApiConstants.GetSavedproductionData}?serialNumber={advanceinspection.SerialNumber}&module={advanceinspection.Module}&rotorsNumber={advanceinspection.RotorsNumber}");

            if (rotorSalesDatasresponse.IsSuccessStatusCode)
            {
                var data = await rotorSalesDatasresponse.Content.ReadAsStringAsync();
                var recentData = JsonSerializer.Deserialize<List<RotorProductionSavedData>>(data,
              new JsonSerializerOptions { PropertyNameCaseInsensitive = true }) ?? new List<RotorProductionSavedData>();


                // var recentData = JsonSerializer.Deserialize<RotorProductionSavedData>(data,
                //     new JsonSerializerOptions { PropertyNameCaseInsensitive = true });

                // rotorproductionSavedDatas = recentData != null ? new List<RotorProductionSavedData> { recentData } : new List<RotorProductionSavedData>();
                rotorproductionSavedDatas = recentData.ToList();
            }
            else
            {
                rotorproductionSavedDatas = new List<RotorProductionSavedData>();
            }
        }
        catch (Exception ex)
        {

            rotorproductionSavedDatas = new List<RotorProductionSavedData>();
        }

        // Assign values based on retrieved data
        if (rotorproductionSavedDatas.Any())
        {
            // var latest = rotorproductionSavedDatas.First();
            var latest = rotorproductionSavedDatas
                        .OrderByDescending(r => r.ProductionSavedDate)
                        .FirstOrDefault();

            SelectedAdvancedSharping = latest.AdvancedSharpingStatus ?? string.Empty;

        }
        else
        {
            SelectedAdvancedSharping = string.Empty;

        }

    }

    private async Task SaveAdvancedData()
    {
        if (string.IsNullOrWhiteSpace(SelectedAdvancedSharping))
        {
            Snackbar.Add("Please select Advanced sharping.", Severity.Error);
            return;
        }

        var userData = await localStorage.GetItemAsync<UserPagesAndRouter>("UserData");
        string useradd = userData?.UserName ?? "User";
        if (userData != null)
        {
            useradd = userData.UserName;
        }

        var submissionData = new productiondataSubmission
            {
                SelectedInspection = selectedAdvanceInspection,
                Workcenters = string.IsNullOrWhiteSpace(SelectedWorkCenters) ? null : SelectedWorkCenters,
                AdvancedSharpingStatus = SelectedAdvancedSharping,
                ProductionSavedBy = useradd,
                ProductionSavedDate = DateTime.Now

            };

        try
        {
            var jsonPart = Newtonsoft.Json.JsonConvert.SerializeObject(submissionData);
            var content = new StringContent(jsonPart, Encoding.UTF8, "application/json");
            HttpClient = _httpClient.CreateClient("ITS.ServerAPI");
            var response = await HttpClient.PostAsync(ApiConstants.SaveproductionsavedData, content);
            if (response.IsSuccessStatusCode)
            {
                Snackbar.Add("Production Data Saved successfully!", Severity.Success);
                ClearAll();
                StateHasChanged();
            }
            else
            {
                Snackbar.Add($"Failed to save the data,Try again ! Status code: {response.StatusCode}", Severity.Error);

            }
        }
        catch (Exception ex)
        {
            Snackbar.Add($"Error save data: {ex.Message}", Severity.Error);
        }


    }

    private async Task SubmitAdvancedData()
    {
        if (string.IsNullOrWhiteSpace(SelectedAdvancedSharping))
        {
            Snackbar.Add("Please select Advanced sharping.", Severity.Error);
            return;
        }

        if (string.IsNullOrWhiteSpace(SelectedWorkCenters))
        {
            Snackbar.Add("Please select Work Center.", Severity.Error);
            return;
        }


        var userData = await localStorage.GetItemAsync<UserPagesAndRouter>("UserData");
        string useradd = userData?.UserName ?? "User";
        if (userData != null)
        {
            useradd = userData.UserName;
        }

        var submissionData = new productiondataSubmission
            {
                SelectedInspection = selectedAdvanceInspection,
                Workcenters = SelectedWorkCenters,
                AdvancedSharpingStatus = SelectedAdvancedSharping,
                ProductionSavedBy = useradd,
                ProductionSavedDate = DateTime.Now

            };

        try
        {
            var jsonPart = Newtonsoft.Json.JsonConvert.SerializeObject(submissionData);
            var content = new StringContent(jsonPart, Encoding.UTF8, "application/json");
            HttpClient = _httpClient.CreateClient("ITS.ServerAPI");
            var response = await HttpClient.PostAsync(ApiConstants.AddRotorProductionData, content);
            if (response.IsSuccessStatusCode)
            {
                Snackbar.Add("Production Data submitted successfully!", Severity.Success);
                ClearAll();
                _hasFetchedIncomingData = false;
                await FetchAllInspections();
                StateHasChanged();
            }
            else
            {
                Snackbar.Add($"Failed to submit the data,Try again ! Status code: {response.StatusCode}", Severity.Error);

            }
        }
        catch (Exception ex)
        {
            Snackbar.Add($"Error submitting data: {ex.Message}", Severity.Error);
        }
    }

    // public async Task GetProductionData()
    // {
    //     try
    //     {
    //         HttpClient = _httpClient.CreateClient("ITS.ServerAPI");

    //         // Get all existing RotorProductionData
    //         var rotorSalesDatasResponse = await HttpClient.GetAsync(ApiConstants.GetAllProductionData);

    //         if (rotorSalesDatasResponse.IsSuccessStatusCode)
    //         {
    //             var productionDataJson = await rotorSalesDatasResponse.Content.ReadAsStringAsync();

    //             if (!string.IsNullOrEmpty(productionDataJson))
    //             {
    //                 RotorProductionDatas = JsonSerializer.Deserialize<List<RotorProductionData>>(productionDataJson,
    //                     new JsonSerializerOptions { PropertyNameCaseInsensitive = true }) ?? new List<RotorProductionData>();
    //             }
    //         }

    //     }
    //     catch (Exception ex)
    //     {
    //         Console.WriteLine($"An error occurred in GetIncomingData: {ex.Message}");
    //     }
    // }

    void ToggleRotor()
    {
        ShowRotorFilters = !ShowRotorFilters;
    }

    // simple rotor part

    void ToggleSimplerotors()
    {
        ShowSimpleRotorFilters = !ShowSimpleRotorFilters;
    }

    private async Task SelectsimpleInspection(RotorSalesData inspection)
    {
        selectedInspection = inspection;
    }

    private async Task Submitsimplerotors()
    {
        if (string.IsNullOrWhiteSpace(SelectedsimpleWorkCenters))
        {
            Snackbar.Add("Please select Work Center.", Severity.Error);
            return;
        }


        var userData = await localStorage.GetItemAsync<UserPagesAndRouter>("UserData");
        string useradd = userData?.UserName ?? "User";
        if (userData != null)
        {
            useradd = userData.UserName;
        }

        var submissionData = new productiondataSubmission
            {
                SelectedInspection = selectedInspection,
                Workcenters = SelectedsimpleWorkCenters,
                AdvancedSharpingStatus = string.IsNullOrWhiteSpace(SelectedAdvancedSharping) ? null : SelectedAdvancedSharping,
                ProductionSavedBy = useradd,
                ProductionSavedDate = DateTime.Now

            };

        try
        {
            var jsonPart = Newtonsoft.Json.JsonConvert.SerializeObject(submissionData);
            var content = new StringContent(jsonPart, Encoding.UTF8, "application/json");
            HttpClient = _httpClient.CreateClient("ITS.ServerAPI");
            var response = await HttpClient.PostAsync(ApiConstants.AddRotorProductionData, content);
            if (response.IsSuccessStatusCode)
            {
                Snackbar.Add("Production Data submitted successfully!", Severity.Success);
                ClearAll();
                _hasFetchedIncomingData = false;
                await FetchAllInspections();
                StateHasChanged();
            }
            else
            {
                Snackbar.Add($"Failed to submit the data,Try again ! Status code: {response.StatusCode}", Severity.Error);

            }
        }
        catch (Exception ex)
        {
            Snackbar.Add($"Error submitting data: {ex.Message}", Severity.Error);
        }

    }

    private async Task Togglenewrotors()
    {
        var dialogOptions = DialogSettings.DialogOptionsAddEditDelete;
        await DialogService.ShowAsync<NewRotorDialog>("New Rotor Details", dialogOptions);

    }


    // feed role part

    void Togglefeedroles()
    {
        ShowfeedrolesFilters = !ShowfeedrolesFilters;
    }


    private async Task SelectFeedRoleInspection(RotorSalesData feedroleinspection)
    {
        selectedfeedroleInspection = feedroleinspection;
    }

    private async Task SubmitFeedRoles()
    {

        if (string.IsNullOrWhiteSpace(SelectedFeedRoleWorkCenters))
        {
            Snackbar.Add("Please select Work Center.", Severity.Error);
            return;
        }


        var userData = await localStorage.GetItemAsync<UserPagesAndRouter>("UserData");
        string useradd = userData?.UserName ?? "User";
        if (userData != null)
        {
            useradd = userData.UserName;
        }

        var submissionData = new productiondataSubmission
            {
                SelectedInspection = selectedfeedroleInspection,
                Workcenters = SelectedFeedRoleWorkCenters,
                AdvancedSharpingStatus = string.IsNullOrWhiteSpace(SelectedAdvancedSharping) ? null : SelectedAdvancedSharping,
                ProductionSavedBy = useradd,
                ProductionSavedDate = DateTime.Now

            };

        try
        {
            var jsonPart = Newtonsoft.Json.JsonConvert.SerializeObject(submissionData);
            var content = new StringContent(jsonPart, Encoding.UTF8, "application/json");
            HttpClient = _httpClient.CreateClient("ITS.ServerAPI");
            var response = await HttpClient.PostAsync(ApiConstants.AddRotorProductionData, content);
            if (response.IsSuccessStatusCode)
            {
                Snackbar.Add(" Production Data submitted successfully!", Severity.Success);
                ClearAll();
                _hasFetchedIncomingData = false;
                await FetchAllInspections();
                StateHasChanged();
            }
            else
            {
                Snackbar.Add($"Failed to submit the data,Try again ! Status code: {response.StatusCode}", Severity.Error);

            }
        }
        catch (Exception ex)
        {
            Snackbar.Add($"Error submitting data: {ex.Message}", Severity.Error);
        }
    }


    // scrap part

    void Togglescrap()
    {
        ShowscrapFilters = !ShowscrapFilters;
    }

    private async Task SelectScrapInspection(RotorSalesData scrapinspection)
    {
        selectedscrapInspection = scrapinspection;
    }

    private async Task DeleteScrap()
    {
        Snackbar.Clear();
        Snackbar.Configuration.PositionClass = Defaults.Classes.Position.TopCenter;

        try
        {
            var jsonPart = Newtonsoft.Json.JsonConvert.SerializeObject(selectedscrapInspection);
            var content = new StringContent(jsonPart, Encoding.UTF8, "application/json");
            HttpClient = _httpClient.CreateClient("ITS.ServerAPI");
            var response = await HttpClient.PutAsync(ApiConstants.UpdateRotorCategorizationType, content);

            if (response.IsSuccessStatusCode)
            {
                Snackbar.Add("Scrap data deleted successfully.", Severity.Success);
                clearScrapdata();
                _hasFetchedIncomingData = false;
                await FetchAllInspections();
                StateHasChanged();

            }
            else
            {
                Snackbar.Add($"Failed to delete Scrap data,Try again ! Status code: {response.StatusCode}", Severity.Error);
            }
        }
        catch (Exception ex)
        {
            Snackbar.Add($"Error Occured {ex.Message}", Severity.Warning);
        }

    }

    private async Task clearScrapdata()
    {
        selectedscrapInspection = null;
        StateHasChanged();
    }


    // damage grinding part
    void Toggledamagegrinding()
    {
        ShowdamagegrindingFilters = !ShowdamagegrindingFilters;
    }

    // Navigation method
    void NavigateToDamageGrinding()
    {
        NavigationManager.NavigateTo("/ddgr");
    }


    private async Task ClearAll()
    {
        selectedInspection = null;
        SelectedWorkCenters = null;
        selectedAdvanceInspection = null;
        selectedfeedroleInspection = null;
        SelectedFeedRoleWorkCenters = null;
        selectedscrapInspection = null;
        SelectedsimpleWorkCenters = null;
        StateHasChanged();
    }




    public class productiondataSubmission
    {
        public RotorSalesData SelectedInspection { get; set; }
        public string? Workcenters { get; set; }
        public string? AdvancedSharpingStatus { get; set; }
        public DateTime? ProductionSavedDate { get; set; }
        public string ProductionSavedBy { get; set; }
    }

}
