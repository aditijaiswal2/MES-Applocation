@using MES.Client.Pages.Account
@using MES.Shared.Entities;
@using static MES.Client.Pages.LoginVC;

@inject NavigationManager NavManager
@inject Blazored.LocalStorage.ILocalStorageService localStorage

@inherits BaseAuthentication

<MudNavMenu Class="mud-width-full custom-navmenu">

    <MudText Typo="Typo.body2" Class="custom-navlink">Kent Manufacturing Execution System</MudText>
    <MudDivider Class="my-2" />

    @if (BaseAuthentication.IsAuthenticated == false)
    {
        <MudNavLink Href="/aep"></MudNavLink>
    }
    else if (UserData != null)
    {
        foreach (var route in UserData.Router)
        {
            if (route != "/adduser")
            @* if (route != "/uvc" && route != "/lvc" && route != "/pivc") *@
            {
                var icon = GetIconForRoute(route);
                var displayName = GetDisplayNameForRoute(route);

                <MudNavLink Href="@route" Icon="@icon" IconColor="Color.Primary" Class="custom-navlink">@displayName</MudNavLink>
               
            }
        }
        <MudNavGroup Title="Rotor/Feed Rolls Service" Icon="@Icons.Material.Filled.Feed" IconColor="Color.Primary" Expanded="false" Class="custom-navlink">
            @* <MudNavLink Href="/roter" Icon="@Icons.Material.Filled.Feed" IconColor="Color.Primary" Class="custom-navlink">Rotor/Feed Rolls Service</MudNavLink> *@
            <MudNavLink Href="/rii" Icon="@Icons.Material.Filled.BrandingWatermark" IconColor="Color.Primary" Class="custom-navlink">Incoming Inspection</MudNavLink>
            <MudNavLink Href="/rsales" Icon="@Icons.Material.Filled.Dashboard" IconColor="Color.Primary" Class="custom-navlink">Sales</MudNavLink>
            <MudNavLink Href="/rps" Icon="@Icons.Material.Filled.ProductionQuantityLimits" IconColor="Color.Primary" Class="custom-navlink">Production Scheduling</MudNavLink>
            <MudNavLink Href="/rg" Icon="@Icons.Material.Filled.GridOn" IconColor="Color.Primary" Class="custom-navlink">Grinding</MudNavLink>
            <MudNavLink Href="/rfi" Icon="@Icons.Material.Filled.Dehaze" IconColor="Color.Primary" Class="custom-navlink">Final Inspection</MudNavLink>
            <MudNavLink Href="/rwsc" Icon="@Icons.Material.Filled.ClearAll" IconColor="Color.Primary" Class="custom-navlink">Waiting For Sales Clearance</MudNavLink>

             </MudNavGroup>
        


    if (UserData.Router.Contains("/adduser"))
        @* if (UserData.Router.Contains("/uvc") || UserData.Router.Contains("/lvc") || UserData.Router.Contains("/pivc")) *@
        {
            @if (UserData.Router.Contains("/adduser"))
            {

               
               @*  <MudNavLink Href="/pumpR" Icon="@Icons.Material.Filled.HeatPump" IconColor="Color.Primary" Class="custom-navlink">Pump Repair</MudNavLink>
                <MudNavLink Href="/sasm" Icon="@Icons.Material.Filled.AutoAwesomeMosaic" IconColor="Color.Primary" Class="custom-navlink">System Assembly</MudNavLink>
                <MudNavLink Href="/pasm" Icon="@Icons.Material.Filled.AutoAwesomeMosaic" IconColor="Color.Primary" Class="custom-navlink">Pelletizer Assembly</MudNavLink>
                <MudNavLink Href="/plasm" Icon="@Icons.Material.Filled.AutoAwesomeMosaic" IconColor="Color.Primary" Class="custom-navlink">Pulverizer Assembly</MudNavLink>
                <MudNavLink Href="/easm" Icon="@Icons.Material.Filled.AutoAwesomeMosaic" IconColor="Color.Primary" Class="custom-navlink">Ettlinger Assembly</MudNavLink>

                <MudNavLink Href="/ship" Icon="@Icons.Material.Filled.LocalShipping" IconColor="Color.Primary" Class="custom-navlink">ShipMent</MudNavLink>
               
                *@
                
            }



        }

         <MudNavGroup Title="Settings" Icon="@Icons.Material.Filled.Settings" IconColor="Color.Primary" Expanded="false" Class="custom-navlink">
            <MudNavLink Href="/adduser" Icon="@Icons.Material.Filled.People" IconColor="Color.Primary" Class="custom-navlink">Manage Users</MudNavLink>
            <MudNavLink Href="/wc" Icon="@Icons.Material.Filled.BusinessCenter" IconColor="Color.Primary" Class="custom-navlink">Manage Workcenters </MudNavLink>
             </MudNavGroup>
    }
</MudNavMenu>

<style>
    .custom-navmenu {
        overflow-y: auto;
        padding-top: 0rem;
    }

    .custom-navlink {
        font-size: 1rem; /* Default font size */
        --mud-icon-size: 24px; /* Default icon size */
    }

</style>

@code {
    public UserPagesAndRouter? UserData { get; set; }

    protected override async Task OnInitializedAsync()
    {
        UserData = await localStorage.GetItemAsync<UserPagesAndRouter>("UserData");

        // await localStorage.RemoveItemAsync("UserData");
    }

    private string GetIconForRoute(string route)
    {
        switch (route)
        {

            case "/index":
                return Icons.Material.Outlined.AssignmentReturned;
            case "/pump":
                return Icons.Material.Filled.Image;
            case "/sa":
                return @Icons.Material.Filled.Info;

            case "/adduser":
                return Icons.Material.Filled.WorkspacePremium;

            // case "/ship":
            //     return Icons.Material.Filled.LocalShipping;

            // case "/roter":
            //     return Icons.Material.Filled.Feed;

            default:
                return "";
        }
    }

    private string GetDisplayNameForRoute(string route)
    {
        switch (route)
        {

            // case "/record":
            //     return "Rotor/Feed rolls  Service";

            case "/addinfo":
                return "System Assembly ";

            case "/index":
                return "Receiving";

            // case "/roter":
            //     return "Rotor/Feed Rolls Service";

            case "/pumpR":
                return "Pump Repair";

            case "/sasm":
                return "System Assembly";

            case "/pasm":
                return "Pelletizer Assembly";

            case "/plasm":
                return "Pulverizer Assembly";

            case "/easm":
                return "Ettlinger Assembly";

            case "/adduser":
                return "Pump Repair";

            case "/ship":
                return "ShipMent";

            case "/wc":
                return "Manage Workcenters";

            case "/rii":
                return "Incoming Inspection";

            case "/rsales":
                return "Sales";

            case "/rps":
                return "Production Scheduling";

            case "/rg":
                return "Grinding";

            case "/rfi":
                return "Final Inspection";

            case "/rwsc":
                return "Waiting For Sales Clearance";


            default:
                return "";
        }
    }
}

                

